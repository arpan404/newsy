{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst {\n  compareModulesByPreOrderIndexOrIdentifier\n} = require(\"../util/comparators\");\n\nconst createSchemaValidation = require(\"../util/create-schema-validation\");\n\nconst createHash = require(\"../util/createHash\");\n\nconst {\n  getUsedModuleIdsAndModules,\n  getFullModuleName\n} = require(\"./IdHelpers\");\n/** @typedef {import(\"../../declarations/plugins/HashedModuleIdsPlugin\").HashedModuleIdsPluginOptions} HashedModuleIdsPluginOptions */\n\n\nconst validate = createSchemaValidation(require(\"../../schemas/plugins/HashedModuleIdsPlugin.check.js\"), () => require(\"../../schemas/plugins/HashedModuleIdsPlugin.json\"), {\n  name: \"Hashed Module Ids Plugin\",\n  baseDataPath: \"options\"\n});\n\nclass HashedModuleIdsPlugin {\n  /**\n   * @param {HashedModuleIdsPluginOptions=} options options object\n   */\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    validate(options);\n    /** @type {HashedModuleIdsPluginOptions} */\n\n    this.options = {\n      context: null,\n      hashFunction: \"md4\",\n      hashDigest: \"base64\",\n      hashDigestLength: 4,\n      ...options\n    };\n  }\n\n  apply(compiler) {\n    const options = this.options;\n    compiler.hooks.compilation.tap(\"HashedModuleIdsPlugin\", compilation => {\n      compilation.hooks.moduleIds.tap(\"HashedModuleIdsPlugin\", () => {\n        const chunkGraph = compilation.chunkGraph;\n        const context = this.options.context ? this.options.context : compiler.context;\n        const [usedIds, modules] = getUsedModuleIdsAndModules(compilation);\n        const modulesInNaturalOrder = modules.sort(compareModulesByPreOrderIndexOrIdentifier(compilation.moduleGraph));\n\n        for (const module of modulesInNaturalOrder) {\n          const ident = getFullModuleName(module, context, compiler.root);\n          const hash = createHash(options.hashFunction);\n          hash.update(ident || \"\");\n          const hashId =\n          /** @type {string} */\n          hash.digest(options.hashDigest);\n          let len = options.hashDigestLength;\n\n          while (usedIds.has(hashId.slice(0, len))) len++;\n\n          const moduleId = hashId.slice(0, len);\n          chunkGraph.setModuleId(module, moduleId);\n          usedIds.add(moduleId);\n        }\n      });\n    });\n  }\n\n}\n\nmodule.exports = HashedModuleIdsPlugin;","map":{"version":3,"names":["compareModulesByPreOrderIndexOrIdentifier","require","createSchemaValidation","createHash","getUsedModuleIdsAndModules","getFullModuleName","validate","name","baseDataPath","HashedModuleIdsPlugin","constructor","options","context","hashFunction","hashDigest","hashDigestLength","apply","compiler","hooks","compilation","tap","moduleIds","chunkGraph","usedIds","modules","modulesInNaturalOrder","sort","moduleGraph","module","ident","root","hash","update","hashId","digest","len","has","slice","moduleId","setModuleId","add","exports"],"sources":["/Users/arpanbhandari/Documents/cod-ing/React/newsapp/node_modules/webpack/lib/ids/HashedModuleIdsPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst {\n\tcompareModulesByPreOrderIndexOrIdentifier\n} = require(\"../util/comparators\");\nconst createSchemaValidation = require(\"../util/create-schema-validation\");\nconst createHash = require(\"../util/createHash\");\nconst {\n\tgetUsedModuleIdsAndModules,\n\tgetFullModuleName\n} = require(\"./IdHelpers\");\n\n/** @typedef {import(\"../../declarations/plugins/HashedModuleIdsPlugin\").HashedModuleIdsPluginOptions} HashedModuleIdsPluginOptions */\n\nconst validate = createSchemaValidation(\n\trequire(\"../../schemas/plugins/HashedModuleIdsPlugin.check.js\"),\n\t() => require(\"../../schemas/plugins/HashedModuleIdsPlugin.json\"),\n\t{\n\t\tname: \"Hashed Module Ids Plugin\",\n\t\tbaseDataPath: \"options\"\n\t}\n);\n\nclass HashedModuleIdsPlugin {\n\t/**\n\t * @param {HashedModuleIdsPluginOptions=} options options object\n\t */\n\tconstructor(options = {}) {\n\t\tvalidate(options);\n\n\t\t/** @type {HashedModuleIdsPluginOptions} */\n\t\tthis.options = {\n\t\t\tcontext: null,\n\t\t\thashFunction: \"md4\",\n\t\t\thashDigest: \"base64\",\n\t\t\thashDigestLength: 4,\n\t\t\t...options\n\t\t};\n\t}\n\n\tapply(compiler) {\n\t\tconst options = this.options;\n\t\tcompiler.hooks.compilation.tap(\"HashedModuleIdsPlugin\", compilation => {\n\t\t\tcompilation.hooks.moduleIds.tap(\"HashedModuleIdsPlugin\", () => {\n\t\t\t\tconst chunkGraph = compilation.chunkGraph;\n\t\t\t\tconst context = this.options.context\n\t\t\t\t\t? this.options.context\n\t\t\t\t\t: compiler.context;\n\n\t\t\t\tconst [usedIds, modules] = getUsedModuleIdsAndModules(compilation);\n\t\t\t\tconst modulesInNaturalOrder = modules.sort(\n\t\t\t\t\tcompareModulesByPreOrderIndexOrIdentifier(compilation.moduleGraph)\n\t\t\t\t);\n\t\t\t\tfor (const module of modulesInNaturalOrder) {\n\t\t\t\t\tconst ident = getFullModuleName(module, context, compiler.root);\n\t\t\t\t\tconst hash = createHash(options.hashFunction);\n\t\t\t\t\thash.update(ident || \"\");\n\t\t\t\t\tconst hashId = /** @type {string} */ (\n\t\t\t\t\t\thash.digest(options.hashDigest)\n\t\t\t\t\t);\n\t\t\t\t\tlet len = options.hashDigestLength;\n\t\t\t\t\twhile (usedIds.has(hashId.slice(0, len))) len++;\n\t\t\t\t\tconst moduleId = hashId.slice(0, len);\n\t\t\t\t\tchunkGraph.setModuleId(module, moduleId);\n\t\t\t\t\tusedIds.add(moduleId);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n\nmodule.exports = HashedModuleIdsPlugin;\n"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;;AAEA,MAAM;EACLA;AADK,IAEFC,OAAO,CAAC,qBAAD,CAFX;;AAGA,MAAMC,sBAAsB,GAAGD,OAAO,CAAC,kCAAD,CAAtC;;AACA,MAAME,UAAU,GAAGF,OAAO,CAAC,oBAAD,CAA1B;;AACA,MAAM;EACLG,0BADK;EAELC;AAFK,IAGFJ,OAAO,CAAC,aAAD,CAHX;AAKA;;;AAEA,MAAMK,QAAQ,GAAGJ,sBAAsB,CACtCD,OAAO,CAAC,sDAAD,CAD+B,EAEtC,MAAMA,OAAO,CAAC,kDAAD,CAFyB,EAGtC;EACCM,IAAI,EAAE,0BADP;EAECC,YAAY,EAAE;AAFf,CAHsC,CAAvC;;AASA,MAAMC,qBAAN,CAA4B;EAC3B;AACD;AACA;EACCC,WAAW,GAAe;IAAA,IAAdC,OAAc,uEAAJ,EAAI;IACzBL,QAAQ,CAACK,OAAD,CAAR;IAEA;;IACA,KAAKA,OAAL,GAAe;MACdC,OAAO,EAAE,IADK;MAEdC,YAAY,EAAE,KAFA;MAGdC,UAAU,EAAE,QAHE;MAIdC,gBAAgB,EAAE,CAJJ;MAKd,GAAGJ;IALW,CAAf;EAOA;;EAEDK,KAAK,CAACC,QAAD,EAAW;IACf,MAAMN,OAAO,GAAG,KAAKA,OAArB;IACAM,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CAA+B,uBAA/B,EAAwDD,WAAW,IAAI;MACtEA,WAAW,CAACD,KAAZ,CAAkBG,SAAlB,CAA4BD,GAA5B,CAAgC,uBAAhC,EAAyD,MAAM;QAC9D,MAAME,UAAU,GAAGH,WAAW,CAACG,UAA/B;QACA,MAAMV,OAAO,GAAG,KAAKD,OAAL,CAAaC,OAAb,GACb,KAAKD,OAAL,CAAaC,OADA,GAEbK,QAAQ,CAACL,OAFZ;QAIA,MAAM,CAACW,OAAD,EAAUC,OAAV,IAAqBpB,0BAA0B,CAACe,WAAD,CAArD;QACA,MAAMM,qBAAqB,GAAGD,OAAO,CAACE,IAAR,CAC7B1B,yCAAyC,CAACmB,WAAW,CAACQ,WAAb,CADZ,CAA9B;;QAGA,KAAK,MAAMC,MAAX,IAAqBH,qBAArB,EAA4C;UAC3C,MAAMI,KAAK,GAAGxB,iBAAiB,CAACuB,MAAD,EAAShB,OAAT,EAAkBK,QAAQ,CAACa,IAA3B,CAA/B;UACA,MAAMC,IAAI,GAAG5B,UAAU,CAACQ,OAAO,CAACE,YAAT,CAAvB;UACAkB,IAAI,CAACC,MAAL,CAAYH,KAAK,IAAI,EAArB;UACA,MAAMI,MAAM;UAAG;UACdF,IAAI,CAACG,MAAL,CAAYvB,OAAO,CAACG,UAApB,CADD;UAGA,IAAIqB,GAAG,GAAGxB,OAAO,CAACI,gBAAlB;;UACA,OAAOQ,OAAO,CAACa,GAAR,CAAYH,MAAM,CAACI,KAAP,CAAa,CAAb,EAAgBF,GAAhB,CAAZ,CAAP,EAA0CA,GAAG;;UAC7C,MAAMG,QAAQ,GAAGL,MAAM,CAACI,KAAP,CAAa,CAAb,EAAgBF,GAAhB,CAAjB;UACAb,UAAU,CAACiB,WAAX,CAAuBX,MAAvB,EAA+BU,QAA/B;UACAf,OAAO,CAACiB,GAAR,CAAYF,QAAZ;QACA;MACD,CAvBD;IAwBA,CAzBD;EA0BA;;AA7C0B;;AAgD5BV,MAAM,CAACa,OAAP,GAAiBhC,qBAAjB"},"metadata":{},"sourceType":"script"}